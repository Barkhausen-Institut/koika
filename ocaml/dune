(library
 (name common)
 (libraries hashcons)
 (modules common))

(library
 (name SGALib)
 (modules SGA SGALib)
 (libraries common)
 (flags (:standard -w -39)))

(library
 (name lv)
 (modules lv)
 (libraries base core stdio parsexp common SGALib zarith)
 (preprocess (pps bisect_ppx --conditional)))

(library
 (name backends)
 (modules verilog dot cpp coq)
 (libraries str common SGALib lv zarith))

(executable
 (name coq_examples)
 (modules CoqInterop coq_examples)
 (libraries common SGALib backends))

(executable
 (name cli)
 (modules cli)
 (preprocess (pps ppx_jane))
 (libraries str zarith SGALib common lv backends))

(env
 (dev
  (flags (:standard -warn-error -A \ -short-paths))))
