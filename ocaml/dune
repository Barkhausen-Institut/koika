(library
 (name common)
 (libraries hashcons)
 (preprocess (pps ppx_jane ppx_deriving.show))
 (modules common))

(library
 (name SGALib)
 (modules SGA SGALib)
 (libraries common)
 (preprocess (pps ppx_jane ppx_deriving.show))
 (flags (:standard -w -39)))

(library
 (name backends)
 (modules verilog dot)
 (libraries common SGALib)
 (preprocess (pps ppx_jane ppx_deriving.show)))

(executable
 (name collatz)
 (modules ("collatz"))
 (preprocess (pps ppx_jane ppx_deriving.show))
 (libraries SGALib backends))

(executable
 (name cli)
 (modules ("cli"))
 (preprocess (pps ppx_jane ppx_deriving.show))
 (libraries parsexp str zarith base core stdio SGALib common backends))

(env
 (dev
  (flags (:standard -warn-error -A))))
