(library
 (name common)
 (preprocess (pps ppx_jane))
 (modules common))

(library
 (name SGALib)
 (modules SGA SGALib)
 (libraries common)
 (preprocess (pps ppx_jane))
 (flags (:standard -w -39)))

(library
 (name backends)
 (modules verilog dot)
 (libraries common SGALib)
 (preprocess (pps ppx_jane)))

(executable
 (name collatz)
 (modes exe)
 (modules ("collatz"))
 (preprocess (pps ppx_jane))
 (libraries SGALib backends))

(executable
 (name cli)
 (modes exe)
 (modules ("cli"))
 (preprocess (pps ppx_jane))
 (libraries core base stdio SGALib common backends))

(env
 (dev
  (flags (:standard -warn-error -A))))
